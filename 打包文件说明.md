# 📦 HabitBloom 打包文件说明

本目录包含所有打包相关的文件和脚本。

## 📄 文档文件

### 1. `打包指南-中文.md` ⭐ **推荐先看这个**
- **用途**：快速上手中文指南
- **内容**：简化的步骤说明，适合快速开始
- **适合**：想要快速打包的用户

### 2. `APK_BUILD_GUIDE.md`
- **用途**：详细的打包文档
- **内容**：完整的打包流程、问题排查、多种方法
- **适合**：需要详细了解或遇到问题的用户

### 3. `ANDROID_BUILD.md`
- **用途**：原始打包文档（保留作为参考）

## 🔧 脚本文件

### 1. `setup_wsl.bat` ⭐ **Windows 用户必用**
- **用途**：在 Windows 上自动安装和配置 WSL
- **使用方法**：右键 → 以管理员身份运行
- **功能**：
  - 检查 WSL 是否已安装
  - 自动安装 WSL 和 Ubuntu
  - 显示后续操作指引

### 2. `check_env.sh` ⭐ **打包前检查**
- **用途**：检查打包环境是否准备就绪
- **使用方法**：
  ```bash
  chmod +x check_env.sh
  ./check_env.sh
  ```
- **检查项**：
  - Python 版本
  - Java 版本
  - Buildozer 安装
  - 项目文件完整性
  - 磁盘空间
  - 网络连接

### 3. `quick_build.sh` ⭐ **一键打包**
- **用途**：简化的打包脚本
- **使用方法**：
  ```bash
  chmod +x quick_build.sh
  ./quick_build.sh
  ```
- **功能**：
  - 自动检查环境
  - 自动安装 Buildozer（如需要）
  - 交互式选择打包类型（Debug/Release）
  - 显示打包结果和 APK 位置

### 4. `build_apk.sh`
- **用途**：原始的打包脚本（功能更全面）
- **使用方法**：
  ```bash
  chmod +x build_apk.sh
  ./build_apk.sh          # Debug 版本
  ./build_apk.sh release  # Release 版本
  ```

## ⚙️ 配置文件

### 1. `buildozer.spec` ⭐ **核心配置文件**
- **用途**：Buildozer 打包配置
- **包含**：
  - 应用信息（名称、版本、包名）
  - 依赖列表
  - Android 配置（API 版本、权限、架构）
  - 签名配置（Release 版本）

### 2. `requirements_kivy.txt`
- **用途**：Kivy 版本的 Python 依赖
- **注意**：Buildozer 使用 `buildozer.spec` 中的 `requirements`，此文件仅供参考

## 🚀 快速开始流程

### Windows 用户

1. **设置 WSL**
   ```cmd
   # 右键以管理员身份运行
   setup_wsl.bat
   ```

2. **打开 Ubuntu**，进入项目目录
   ```bash
   cd /mnt/d/笔记/副业/LLM_APP/HabitBloom
   # 或英文路径
   cd /mnt/d/Projects/HabitBloom
   ```

3. **检查环境**
   ```bash
   chmod +x check_env.sh
   ./check_env.sh
   ```

4. **开始打包**
   ```bash
   chmod +x quick_build.sh
   ./quick_build.sh
   ```

### Linux 用户

1. **进入项目目录**
   ```bash
   cd /path/to/HabitBloom
   ```

2. **检查环境**
   ```bash
   chmod +x check_env.sh
   ./check_env.sh
   ```

3. **开始打包**
   ```bash
   chmod +x quick_build.sh
   ./quick_build.sh
   ```

## 📋 打包步骤总结

```
1. 安装 WSL（Windows）或使用 Linux
   ↓
2. 安装系统依赖（Java、Python、构建工具）
   ↓
3. 安装 Buildozer
   ↓
4. 检查环境（可选）
   ↓
5. 运行打包脚本
   ↓
6. 等待打包完成（首次 30-60 分钟，后续 10-20 分钟）
   ↓
7. 获取 APK 文件（在 bin/ 目录）
   ↓
8. 传输到手机并安装
```

## ⚠️ 注意事项

1. **首次打包很慢**：需要下载 Android SDK/NDK（约 2-3GB）
2. **需要稳定网络**：下载过程需要良好的网络连接
3. **路径问题**：如果项目路径包含中文，建议复制到英文路径
4. **磁盘空间**：确保至少有 8GB 可用空间
5. **内存要求**：至少 4GB 内存

## 🆘 遇到问题？

1. **查看详细文档**：`APK_BUILD_GUIDE.md`
2. **检查错误日志**：`.buildozer/android/platform/build/dists/habitbloom/build.log`
3. **运行环境检查**：`./check_env.sh`
4. **常见问题**：见 `APK_BUILD_GUIDE.md` 中的「常见问题解决」章节

## 📞 文件关系图

```
打包流程
├── setup_wsl.bat (Windows 用户)
│   └── 安装 WSL
│
├── check_env.sh
│   └── 检查环境
│
├── quick_build.sh ⭐
│   ├── 读取 buildozer.spec
│   ├── 调用 buildozer
│   └── 生成 APK (bin/*.apk)
│
└── 文档
    ├── 打包指南-中文.md ⭐ (快速指南)
    └── APK_BUILD_GUIDE.md (详细文档)
```

---

**推荐阅读顺序**：
1. `打包指南-中文.md` - 快速了解流程
2. `setup_wsl.bat`（Windows）或直接运行 `check_env.sh` - 准备环境
3. `quick_build.sh` - 开始打包
4. `APK_BUILD_GUIDE.md` - 遇到问题时查看

祝您打包顺利！🌱
