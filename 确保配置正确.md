# âœ… å¦‚ä½•ç¡®ä¿ buildozer.spec é…ç½®æ­£ç¡®

## ğŸ” å¿«é€Ÿæ£€æŸ¥æ–¹æ³•

### æ–¹æ³• 1ï¼šä½¿ç”¨æ£€æŸ¥è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åœ¨é¡¹ç›®ç›®å½•è¿è¡Œ
python æ£€æŸ¥é…ç½®.py
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š
- âœ… æ‰€æœ‰å¿…éœ€æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âœ… buildozer.spec é…ç½®æ˜¯å¦æ­£ç¡®
- âœ… é¡¹ç›®ç»“æ„æ˜¯å¦å®Œæ•´

---

## ğŸ“‹ æ‰‹åŠ¨æ£€æŸ¥æ¸…å•

### 1. æ£€æŸ¥ buildozer.spec æ–‡ä»¶

æ‰“å¼€ `buildozer.spec`ï¼Œç¡®ä¿ä»¥ä¸‹é…ç½®å­˜åœ¨ä¸”æ­£ç¡®ï¼š

```ini
[app]

# âœ… åº”ç”¨ä¿¡æ¯
title = HabitBloom
package.name = habitbloom
package.domain = org.habitbloom

# âœ… ä¸»å…¥å£æ–‡ä»¶ï¼ˆå¿…é¡»æ­£ç¡®ï¼‰
source.main = main_kivy.py

# âœ… ä¾èµ–é…ç½®ï¼ˆæ³¨æ„æ ¼å¼ï¼ï¼‰
requirements = python3,kivy==2.3.1,pillow

# âœ… Android é…ç½®
android.api = 33
android.minapi = 21
android.accept_sdk_license = True
```

### 2. æ£€æŸ¥å¿…éœ€æ–‡ä»¶

ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶/ç›®å½•å­˜åœ¨ï¼š

```
HabitBloom/
â”œâ”€â”€ main_kivy.py          âœ… å¿…é¡»å­˜åœ¨
â”œâ”€â”€ buildozer.spec        âœ… å¿…é¡»å­˜åœ¨
â”œâ”€â”€ src/                  âœ… å¿…é¡»å­˜åœ¨
â”‚   â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ managers/
â”‚   â””â”€â”€ utils/
â””â”€â”€ kivy_ui/              âœ… å¿…é¡»å­˜åœ¨
    â”œâ”€â”€ screens/
    â””â”€â”€ widgets/
```

### 3. æ£€æŸ¥å¸¸è§é”™è¯¯

#### âŒ é”™è¯¯ 1ï¼šrequirements æ ¼å¼é”™è¯¯

**é”™è¯¯ç¤ºä¾‹ï¼š**
```ini
requirements = python3, kivy==2.3.1, pillow  # âŒ æœ‰ç©ºæ ¼
requirements = python3,kivy==2.3.1,pillow     # âœ… æ­£ç¡®
```

**ä¿®å¤ï¼š** åˆ é™¤é€—å·åçš„æ‰€æœ‰ç©ºæ ¼

#### âŒ é”™è¯¯ 2ï¼šä¸»å…¥å£æ–‡ä»¶è·¯å¾„é”™è¯¯

**é”™è¯¯ç¤ºä¾‹ï¼š**
```ini
source.main = main.py           # âŒ åº”è¯¥æ˜¯ main_kivy.py
source.main = ./main_kivy.py    # âŒ ä¸éœ€è¦è·¯å¾„å‰ç¼€
source.main = main_kivy.py      # âœ… æ­£ç¡®
```

**ä¿®å¤ï¼š** ç¡®ä¿æ˜¯ `main_kivy.py`ï¼Œä¸”æ–‡ä»¶å­˜åœ¨

#### âŒ é”™è¯¯ 3ï¼šç¼ºå°‘ SDK è®¸å¯è¯é…ç½®

**é”™è¯¯ç¤ºä¾‹ï¼š**
```ini
# æ²¡æœ‰ android.accept_sdk_license é…ç½®
```

**ä¿®å¤ï¼š** æ·»åŠ  `android.accept_sdk_license = True`

#### âŒ é”™è¯¯ 4ï¼šæ–‡ä»¶æœªä¸Šä¼ åˆ° GitHub

**æ£€æŸ¥æ–¹æ³•ï¼š**
1. åœ¨ GitHub ä»“åº“é¡µé¢æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨
2. ç¡®è®¤æ‰€æœ‰å¿…éœ€æ–‡ä»¶éƒ½åœ¨

**ä¿®å¤ï¼š** é‡æ–°ä¸Šä¼ ç¼ºå¤±çš„æ–‡ä»¶

---

## ğŸ› ï¸ ä¿®å¤æ­¥éª¤

### å¦‚æœæ£€æŸ¥è„šæœ¬å‘ç°é—®é¢˜ï¼š

1. **æŸ¥çœ‹é”™è¯¯ä¿¡æ¯**
   ```bash
   python æ£€æŸ¥é…ç½®.py
   ```

2. **æ ¹æ®é”™è¯¯ä¿®å¤**
   - å¦‚æœæ–‡ä»¶ç¼ºå¤± â†’ åˆ›å»ºæˆ–æ¢å¤æ–‡ä»¶
   - å¦‚æœé…ç½®é”™è¯¯ â†’ ç¼–è¾‘ `buildozer.spec`
   - å¦‚æœè·¯å¾„é”™è¯¯ â†’ æ£€æŸ¥æ–‡ä»¶è·¯å¾„

3. **é‡æ–°æ£€æŸ¥**
   ```bash
   python æ£€æŸ¥é…ç½®.py
   ```

4. **æäº¤ä¿®å¤**
   ```bash
   git add buildozer.spec
   git commit -m "ä¿®å¤ buildozer.spec é…ç½®"
   git push
   ```

5. **é‡æ–°è¿è¡Œæ‰“åŒ…**
   - åœ¨ GitHub Actions ä¸­é‡æ–°è¿è¡Œå·¥ä½œæµ

---

## ğŸ“ buildozer.spec å®Œæ•´ç¤ºä¾‹

```ini
[app]

# åº”ç”¨ä¿¡æ¯
title = HabitBloom
package.name = habitbloom
package.domain = org.habitbloom

# æºç é…ç½®
source.dir = .
source.include_exts = py,png,jpg,kv,atlas,json,db
source.main = main_kivy.py
source.exclude_dirs = __pycache__, .git, .vscode, .idea
source.exclude_patterns = main.py, *_qt.py

# ç‰ˆæœ¬
version = 1.0.0

# ä¾èµ–ï¼ˆé‡è¦ï¼šé€—å·åä¸è¦æœ‰ç©ºæ ¼ï¼‰
requirements = python3,kivy==2.3.1,pillow

# æƒé™
android.permissions = WRITE_EXTERNAL_STORAGE, READ_EXTERNAL_STORAGE, VIBRATE

# Android é…ç½®
android.api = 33
android.minapi = 21
android.ndk = 25b
android.sdk = 33
android.accept_sdk_license = True
android.archs = arm64-v8a, armeabi-v7a

# å±å¹•æ–¹å‘
orientation = portrait
fullscreen = 0

# å¯åŠ¨ç”»é¢
presplash.color = #4CAF50

[buildozer]
log_level = 2
warn_on_root = 1
```

---

## âœ… éªŒè¯æ¸…å•

æ‰“åŒ…å‰ç¡®è®¤ï¼š

- [ ] `buildozer.spec` æ–‡ä»¶å­˜åœ¨
- [ ] `source.main = main_kivy.py` é…ç½®æ­£ç¡®
- [ ] `main_kivy.py` æ–‡ä»¶å­˜åœ¨
- [ ] `requirements =` è¡Œæ ¼å¼æ­£ç¡®ï¼ˆæ— å¤šä½™ç©ºæ ¼ï¼‰
- [ ] `android.accept_sdk_license = True` å·²é…ç½®
- [ ] `src/` ç›®å½•å­˜åœ¨ä¸”åŒ…å«æ‰€æœ‰æ¨¡å—
- [ ] `kivy_ui/` ç›®å½•å­˜åœ¨ä¸”åŒ…å«æ‰€æœ‰ç»„ä»¶
- [ ] æ‰€æœ‰æ–‡ä»¶éƒ½å·²ä¸Šä¼ åˆ° GitHub

---

## ğŸ†˜ ä»ç„¶å¤±è´¥ï¼Ÿ

å¦‚æœæ£€æŸ¥éƒ½é€šè¿‡äº†ä½†æ‰“åŒ…ä»ç„¶å¤±è´¥ï¼š

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   - åœ¨ GitHub Actions ä¸­æŸ¥çœ‹å®Œæ•´çš„æ„å»ºæ—¥å¿—
   - æŸ¥æ‰¾å…·ä½“çš„é”™è¯¯ä¿¡æ¯

2. **å¸¸è§é—®é¢˜**
   - ä¾èµ–ç‰ˆæœ¬å†²çª â†’ å°è¯•æ›´æ–°ç‰ˆæœ¬å·
   - å†…å­˜ä¸è¶³ â†’ GitHub Actions æœ‰å†…å­˜é™åˆ¶
   - è¶…æ—¶ â†’ æ„å»ºå¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´

3. **è·å–å¸®åŠ©**
   - æŸ¥çœ‹ `GitHubæ‰“åŒ…æ­¥éª¤.md` ä¸­çš„æ•…éšœæ’é™¤éƒ¨åˆ†
   - æ£€æŸ¥ GitHub Actions æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯

---

## ğŸ¯ å¿«é€Ÿä¿®å¤å‘½ä»¤

```bash
# 1. æ£€æŸ¥é…ç½®
python æ£€æŸ¥é…ç½®.py

# 2. å¦‚æœå‘ç°é—®é¢˜ï¼Œä¿®å¤åé‡æ–°æ£€æŸ¥
python æ£€æŸ¥é…ç½®.py

# 3. æäº¤ä¿®å¤
git add .
git commit -m "ä¿®å¤é…ç½®"
git push

# 4. åœ¨ GitHub Actions ä¸­é‡æ–°è¿è¡Œ
```

---

**è®°ä½ï¼š** å¤§å¤šæ•°æ‰“åŒ…å¤±è´¥éƒ½æ˜¯å› ä¸º `buildozer.spec` é…ç½®é”™è¯¯æˆ–æ–‡ä»¶ç¼ºå¤±ã€‚ä½¿ç”¨æ£€æŸ¥è„šæœ¬å¯ä»¥å¿«é€Ÿå‘ç°é—®é¢˜ï¼
