# 🚀 HabitBloom 一键打包指南

## 最简单的方式

### Windows 用户

**双击运行 `一键打包.bat`** 即可！

或者：
```cmd
python auto_build.py
```

### Linux 用户

```bash
python3 auto_build.py
```

就这么简单！脚本会自动：
- ✅ 检测操作系统
- ✅ 安装 WSL（Windows）
- ✅ 安装所有依赖
- ✅ 配置环境变量
- ✅ 执行打包
- ✅ 复制 APK 到下载目录

---

## 详细说明

### 功能特点

1. **全自动化**
   - 自动检测环境
   - 自动安装依赖
   - 自动配置环境变量
   - 无需手动操作

2. **智能识别**
   - Windows 自动使用 WSL
   - Linux 直接运行
   - 自动转换路径

3. **实时反馈**
   - 显示打包进度
   - 彩色输出提示
   - 错误信息清晰

### 使用步骤

1. **打开终端/命令行**
   - Windows: 双击 `一键打包.bat` 或运行 `python auto_build.py`
   - Linux: 运行 `python3 auto_build.py`

2. **选择打包类型**
   - 输入 `1` 打包 Debug 版本（测试用）
   - 输入 `2` 打包 Release 版本（发布用，需要签名）

3. **等待完成**
   - 首次打包：30-60 分钟（下载 SDK/NDK）
   - 后续打包：10-20 分钟

4. **获取 APK**
   - Windows: 自动复制到 `下载` 文件夹
   - Linux: 在 `bin/` 目录

---

## 注意事项

### 首次运行

- **Windows**: 如果未安装 WSL，脚本会提示安装
  - 需要管理员权限
  - 安装后需要重启电脑
  - 重启后重新运行脚本即可

- **下载时间**: 首次打包会下载 Android SDK/NDK（约 2-3GB）
  - 需要稳定的网络连接
  - 可能需要 10-30 分钟

### 网络问题

如果下载失败，可以：
1. 检查网络连接
2. 使用代理（脚本会自动使用系统代理）
3. 重新运行脚本（会继续下载，不会从头开始）

### 权限问题

- **Windows**: 安装 WSL 需要管理员权限
- **Linux**: 安装系统包需要 sudo 权限（脚本会自动提示输入密码）

---

## 常见问题

### Q: 提示"未找到 Python"
**A**: 请先安装 Python 3.8+，并确保添加到 PATH

### Q: WSL 安装失败
**A**: 请以管理员身份运行，或手动运行 `wsl --install -d Ubuntu-22.04`

### Q: 打包时间太长
**A**: 首次打包正常，需要下载大量文件。后续打包会快很多。

### Q: 找不到 APK 文件
**A**: 检查 `bin/` 目录，或查看错误日志

### Q: 打包失败
**A**: 查看终端输出的错误信息，常见原因：
- 网络问题（下载失败）
- 磁盘空间不足（需要至少 8GB）
- 内存不足（需要至少 4GB）

---

## 高级选项

如果需要更多控制，可以使用原始脚本：

```bash
# 检查环境
chmod +x check_env.sh
./check_env.sh

# 手动打包
chmod +x quick_build.sh
./quick_build.sh
```

---

## 推荐流程

1. **首次使用**
   ```
   双击 一键打包.bat
   → 等待 WSL 安装（如需要）
   → 重启电脑（如提示）
   → 重新运行脚本
   → 等待打包完成
   ```

2. **后续使用**
   ```
   双击 一键打包.bat
   → 选择打包类型
   → 等待完成
   → 获取 APK
   ```

---

就是这么简单！🎉
